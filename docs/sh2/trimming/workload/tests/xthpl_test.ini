# Default module_template configuration.
# Lines beginning with '#' are comments; blank lines are ignored

[defaults]
work_root: ~/workload_test_suite/xthpl_test

#units -  m:minutes, h:hours
wall_clock_time_limit_unit:m
wall_clock_time_limit_value:

[xthpl_test]
component_test_type:benchmark

setup_script_source_dir:util
setup_script:hpl_rungen.pl
setup_logfile_name:setup.log
memory_reduction_multiplier:1

test_script:xhpl
test_script_parameters:

test_script_source_dir:/opt/cray/diag/bin/<arch>
test_script_ini_source_dir:
test_script_ini:
additional_ld_library_path_components:

number_of_nodes_per_job:1
run_test_copies_concurrently:True

#log parsing details
error_keyword_list:error,fail
error_match_exclusion_list:tests completed and failed
single_logfile_per_job:True
nodeinfo_in_logfile_name:True
timestamp_path_index:-2
timestamp_component_index:-1
nodeinfo_path_index:-1
nodeinfo_component_index:3
nodeinfo_component_index_alternate:-1

[alps]
#default aprun settings 
job_launcher:aprun 
aprun_parameters:-n WIDTH -N 1 -j NUM_HYPER_THREADS -L NODE_LIST 

[slurm]
job_launcher:srun 
#job_launcher:sbatch 
srun_parameters:--exclusive -n WIDTH -N 1 --hint=multithread --threads-per-core=NUM_HYPER_THREADS --nodelist=NODE_LIST --time=120 
#srun_parameters:--exclusive -n WIDTH -N 1 --hint=multithread --threads-per-core=NUM_HYPER_THREADS --nodelist=NODE_LIST --time=60 --wrap="srun TEST_BINARY" 
#srun_parameters:--exclusive -o STDOUT -e STDERR --nodelist=NODE_LIST --time=840 /opt/cray/diag/workload/tests/xthpl_slurm_job_knl.sh
#srun_parameters:--exclusive --nodelist=NODE_LIST --time=840 /opt/cray/diag/workload/tests/xthpl_slurm_job_knl.sh
 
